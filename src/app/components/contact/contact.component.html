<section class="contact" [class.visible]="isVisible()">
  <div class="contact-container">
    <!-- Section Header -->
    <div class="section-header">
      <h2 class="section-title" i18n="@@contact.title">{{ translate('contact.title') }}</h2>
      <p class="section-subtitle" i18n="@@contact.subtitle">
        {{ translate('contact.subtitle') }}
      </p>
    </div>

    <div class="contact-content">
      <!-- Contact Information -->
      <div class="contact-info-section">
        <h3 class="info-title" i18n="@@contact.info_title">{{ translate('contact.info_title') }}</h3>

        <!-- Email -->
        <div class="contact-item">
          <div class="contact-icon">
            <mat-icon>email</mat-icon>
          </div>
          <div class="contact-details">
            <h4 class="contact-label" i18n="@@contact.labels.email">{{ translate('contact.labels.email') }}</h4>
            <a
              [href]="'mailto:' + contactInfo.email"
              class="contact-value"
              (click)="copyToClipboard(contactInfo.email)"
            >
              {{ contactInfo.email }}
            </a>
          </div>
        </div>

        <!-- Phone -->
        <div class="contact-item">
          <div class="contact-icon">
            <mat-icon>phone</mat-icon>
          </div>
          <div class="contact-details">
            <h4 class="contact-label" i18n="@@contact.labels.phone">{{ translate('contact.labels.phone') }}</h4>
            <a
              [href]="'tel:' + contactInfo.phone"
              class="contact-value"
              (click)="copyToClipboard(contactInfo.phone)"
            >
              {{ contactInfo.phone }}
            </a>
          </div>
        </div>

        <!-- Address -->
        <div class="contact-item">
          <div class="contact-icon">
            <mat-icon>location_on</mat-icon>
          </div>
          <div class="contact-details">
            <h4 class="contact-label" i18n="@@contact.labels.office">{{ translate('contact.labels.office') }}</h4>
            <div class="contact-value address" (click)="openMaps()">
              <div>{{ contactInfo.address.line1 }}</div>
              <div>{{ contactInfo.address.line2 }}</div>
              <div>{{ contactInfo.address.line3 }}</div>
            </div>
          </div>
        </div>

        <!-- Business Hours -->
        <div class="business-hours">
          <h4 class="hours-title" i18n="@@contact.business_hours">{{ translate('contact.business_hours') }}</h4>
          <div class="hours-list">
            <div class="hours-item">
              <span i18n="@@contact.schedule.monday_friday">{{ translate('contact.schedule.monday_friday') }}</span>
              <span i18n="@@contact.schedule.weekday_hours">{{ translate('contact.schedule.weekday_hours') }}</span>
            </div>
            <div class="hours-item">
              <span i18n="@@contact.schedule.saturday">{{ translate('contact.schedule.saturday') }}</span>
              <span i18n="@@contact.schedule.saturday_hours">{{ translate('contact.schedule.saturday_hours') }}</span>
            </div>
            <div class="hours-item">
              <span i18n="@@contact.schedule.sunday">{{ translate('contact.schedule.sunday') }}</span>
              <span i18n="@@contact.schedule.closed">{{ translate('contact.schedule.closed') }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Form -->
      <div class="contact-form-section">
        <h3 class="form-title" i18n="@@contact.form_title">{{ translate('contact.form_title') }}</h3>

        <!-- Success Message -->
        <div class="success-message" *ngIf="submitSuccess()">
          <mat-icon>check_circle</mat-icon>
          <div class="success-content">
            <h4 i18n="@@contact.success_title">{{ translate('contact.success_title') }}</h4>
            <p i18n="@@contact.success_description">{{ translate('contact.success_description') }}</p>
          </div>
        </div>

        <!-- Contact Form -->
        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form" *ngIf="!submitSuccess()">
          <!-- Name & Email Row -->
          <div class="form-row">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label i18n="@@contact.labels.full_name">{{ translate('contact.labels.full_name') }} *</mat-label>
              <input matInput formControlName="name" [placeholder]="translate('contact.placeholders.full_name')" i18n-placeholder="@@contact.placeholders.full_name">
              <mat-error *ngIf="getFieldError('name')">{{ getFieldError('name') }}</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-field">
              <mat-label i18n="@@contact.labels.email_address">{{ translate('contact.labels.email_address') }} *</mat-label>
              <input matInput type="email" formControlName="email" [placeholder]="translate('contact.placeholders.email')" i18n-placeholder="@@contact.placeholders.email">
              <mat-error *ngIf="getFieldError('email')">{{ getFieldError('email') }}</mat-error>
            </mat-form-field>
          </div>

          <!-- Company & Service Row -->
          <div class="form-row">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label i18n="@@contact.labels.company">{{ translate('contact.labels.company') }}</mat-label>
              <input matInput formControlName="company" [placeholder]="translate('contact.placeholders.company')" i18n-placeholder="@@contact.placeholders.company">
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-field">
              <mat-label i18n="@@contact.labels.service_interest">{{ translate('contact.labels.service_interest') }} *</mat-label>
              <mat-select formControlName="service">
                <mat-option *ngFor="let service of services" [value]="service.value">
                  {{ translate(service.labelKey) }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="getFieldError('service')">{{ getFieldError('service') }}</mat-error>
            </mat-form-field>
          </div>

          <!-- Message -->
          <div class="form-row">
            <mat-form-field appearance="outline" class="form-field full-width">
              <mat-label i18n="@@contact.labels.project_details">{{ translate('contact.labels.project_details') }} *</mat-label>
              <textarea
                matInput
                formControlName="message"
                rows="4"
                [placeholder]="translate('contact.placeholders.message')"
                i18n-placeholder="@@contact.placeholders.message"
              ></textarea>
              <mat-error *ngIf="getFieldError('message')">{{ getFieldError('message') }}</mat-error>
            </mat-form-field>
          </div>

          <!-- Submit Button -->
          <div class="form-actions">
            <button
              type="submit"
              class="submit-btn"
              [disabled]="isSubmitting()"
              [class.loading]="isSubmitting()"
            >
              <span *ngIf="!isSubmitting()" i18n="@@contact.send_message">{{ translate('contact.send_message') }}</span>
              <span *ngIf="isSubmitting()">
                <mat-icon class="loading-spinner">hourglass_empty</mat-icon>
                <span i18n="@@contact.sending">{{ translate('contact.sending') }}</span>
              </span>
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Additional Info -->
    <div class="additional-info">
      <div class="info-cards">
        <div class="info-card">
          <mat-icon>schedule</mat-icon>
          <h4 i18n="@@contact.info_cards.quick_response.title">{{ translate('contact.info_cards.quick_response.title') }}</h4>
          <p i18n="@@contact.info_cards.quick_response.description">{{ translate('contact.info_cards.quick_response.description') }}</p>
        </div>

        <div class="info-card">
          <mat-icon>security</mat-icon>
          <h4 i18n="@@contact.info_cards.confidential.title">{{ translate('contact.info_cards.confidential.title') }}</h4>
          <p i18n="@@contact.info_cards.confidential.description">{{ translate('contact.info_cards.confidential.description') }}</p>
        </div>

        <div class="info-card">
          <mat-icon>support</mat-icon>
          <h4 i18n="@@contact.info_cards.free_consultation.title">{{ translate('contact.info_cards.free_consultation.title') }}</h4>
          <p i18n="@@contact.info_cards.free_consultation.description">{{ translate('contact.info_cards.free_consultation.description') }}</p>
        </div>
      </div>
    </div>
  </div>
</section>
